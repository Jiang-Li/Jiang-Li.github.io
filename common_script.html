<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Script</title>

<script src="site_libs/header-attrs-2.6/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Jiang Li, PhD</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="program.html">Business Analytics FAQ</a>
</li>
<li>
  <a href="post.html">Post/Study/Publication</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Script</h1>

</div>


<p>I often use R and Python simultaneously. To make the switch between them easier, I built a list of the commonly-used script for a quick reference. First, to demonstrate the code, simulate a sample data set with missing values and duplicated values.</p>
<pre class="r"><code>set.seed(1)
N &lt;- 1000
df &lt;- data.frame(
  dimension1 = sample(c(&quot;I&quot;, &quot;II&quot;, &quot;III&quot;), N, replace = T),
  dimension2 = sample(c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;), N, replace = T),
  measure1 = sample(1:10, N, replace = T),
  measure2 = sample(1:10, N, replace = T)
)

df &lt;- as.data.frame(lapply(df, 
                       function(r) 
                         r[sample(c(TRUE, NA), 
                                  prob = c(0.85, 0.15), 
                                  size = length(r), 
                                  replace = TRUE)]
                       )
                    )

head(df)</code></pre>
<pre><code>##   dimension1 dimension2 measure1 measure2
## 1          I       &lt;NA&gt;        7        7
## 2        III          B        3        8
## 3          I          A        4       10
## 4         II       &lt;NA&gt;        7        3
## 5          I          A        9        1
## 6        III          A       10       NA</code></pre>
<p>Then, in order to share the data in Python, save the data in a feather file.</p>
<pre class="r"><code>library(feather)
write_feather(df, &quot;sample_data.feather&quot;)</code></pre>
<div id="rows-and-columns" class="section level2" number="0.1">
<h2 number="0.1"><span class="header-section-number">0.1</span> Rows and Columns</h2>
<div id="r" class="section level3" number="0.1.1">
<h3 number="0.1.1"><span class="header-section-number">0.1.1</span> R</h3>
<pre class="r"><code># row count
nrow(df) </code></pre>
<pre><code>## [1] 1000</code></pre>
<pre class="r"><code># column count
ncol(df)</code></pre>
<pre><code>## [1] 4</code></pre>
<pre class="r"><code># shape
dim(df)</code></pre>
<pre><code>## [1] 1000    4</code></pre>
<pre class="r"><code># column names
names(df) </code></pre>
<pre><code>## [1] &quot;dimension1&quot; &quot;dimension2&quot; &quot;measure1&quot;   &quot;measure2&quot;</code></pre>
<pre class="r"><code># data type by column
lapply(df, class) </code></pre>
<pre><code>## $dimension1
## [1] &quot;character&quot;
## 
## $dimension2
## [1] &quot;character&quot;
## 
## $measure1
## [1] &quot;integer&quot;
## 
## $measure2
## [1] &quot;integer&quot;</code></pre>
</div>
<div id="python" class="section level3" number="0.1.2">
<h3 number="0.1.2"><span class="header-section-number">0.1.2</span> Python</h3>
<pre class="python"><code>import pandas as pd
df = pd.read_feather(&quot;sample_data.feather&quot;)

# row count
df.shape[0]</code></pre>
<pre><code>## 1000</code></pre>
<pre class="python"><code># column count
df.shape[1]</code></pre>
<pre><code>## 4</code></pre>
<pre class="python"><code># shape
df.shape</code></pre>
<pre><code>## (1000, 4)</code></pre>
<pre class="python"><code># column names
list(df) </code></pre>
<pre><code>## [&#39;dimension1&#39;, &#39;dimension2&#39;, &#39;measure1&#39;, &#39;measure2&#39;]</code></pre>
<pre class="python"><code># data types by column
df.dtypes  </code></pre>
<pre><code>## dimension1     object
## dimension2     object
## measure1      float64
## measure2      float64
## dtype: object</code></pre>
</div>
</div>
<div id="missing-values" class="section level2" number="0.2">
<h2 number="0.2"><span class="header-section-number">0.2</span> Missing Values</h2>
<div id="r-1" class="section level3" number="0.2.1">
<h3 number="0.2.1"><span class="header-section-number">0.2.1</span> R</h3>
<pre class="r"><code># count missing values by columns
colSums(is.na(df)) </code></pre>
<pre><code>## dimension1 dimension2   measure1   measure2 
##        163        163        143        156</code></pre>
<pre class="r"><code># fill all missing values by 0
df[is.na(df)] &lt;- 0

# fill missing by columns
df %&gt;% replace_na(list(dimension1 = &quot;Unknown&quot;, measure1 = 0))</code></pre>
<pre><code>##     dimension1 dimension2 measure1 measure2
## 1            I          0        7        7
## 2          III          B        3        8
## 3            I          A        4       10
## 4           II          0        7        3
## 5            I          A        9        1
## 6          III          A       10        0
## 7          III          A        8        8
## 8            0          C        2        7
## 9           II          C        2        9
## 10         III          C        7        1
## 11         III          0        5        4
## 12           I          A        9        6
## 13           I          C        0       10
## 14           I          A        2        4
## 15          II          A        1        9
## 16           0          C        7        1
## 17          II          C        8        0
## 18          II          B        0        2
## 19         III          0        5        5
## 20           0          A        8       10
## 21         III          0       10        8
## 22           I          B        9        2
## 23           I          C        0        8
## 24           I          0        7       10
## 25           I          B        5        2
## 26          II          B        8        9
## 27           I          B        4        9
## 28           I          C        4        5
## 29          II          B        0        0
## 30           0          A        3        9
## 31          II          0       10        1
## 32           I          A        0        0
## 33         III          A        5        9
## 34           I          C        9        6
## 35         III          0        2        5
## 36          II          C        5        8
## 37          II          0        0        2
## 38           0          C        7       10
## 39          II          B        3        5
## 40         III          A        5        8
## 41          II          B        4        8
## 42           I          0        2        0
## 43         III          C        0        9
## 44          II          B        2        7
## 45           I          A        7       10
## 46           I          C        3        9
## 47           0          C        8        7
## 48          II          B        6        4
## 49          II          B       10       10
## 50           0          A        2        4
## 51         III          A        6        8
## 52          II          C        7        0
## 53          II          0        3        1
## 54          II          C        3        2
## 55          II          B       10        4
## 56           0          C        1       10
## 57          II          A        2        2
## 58          II          C        1        1
## 59          II          A        1        5
## 60          II          C        0        8
## 61           I          A        8        4
## 62         III          B        0        1
## 63           0          B        9        4
## 64          II          C        9        0
## 65         III          A        6        7
## 66         III          A        1        8
## 67          II          0        7        1
## 68         III          B        3        2
## 69         III          A        7        7
## 70           I          B        4        6
## 71           I          C        5        4
## 72           0          B        2        1
## 73           I          C        7        8
## 74         III          B        6        1
## 75          II          B        7        3
## 76         III          0        9       10
## 77           I          B        9        4
## 78           0          C        7        0
## 79          II          A       10        9
## 80           I          A        6        2
## 81           I          C        9        5
## 82           I          A        6        8
## 83           I          B        2        7
## 84           0          C        7        6
## 85          II          C        6        5
## 86           I          C        2       10
## 87           I          C       10        0
## 88         III          A        4        0
## 89           0          0        6        0
## 90         III          A        5        7
## 91          II          C        3        0
## 92           0          B        2        4
## 93          II          A        4        5
## 94         III          A        2        5
## 95          II          0        0        4
## 96           0          A       10       10
## 97         III          0        9        5
## 98         III          0        5        1
## 99         III          A        7        7
## 100          I          B        9        7
## 101          0          B        1       10
## 102         II          A        3        2
## 103          0          A        9        2
## 104        III          B        4        4
## 105          0          A        1        0
## 106         II          B        5        4
## 107        III          B        9        9
## 108         II          C        2        8
## 109          I          0        7        7
## 110         II          A        3        2
## 111          I          0        4        2
## 112          0          0        9        4
## 113        III          0        1        8
## 114          I          0        5        0
## 115         II          0        4        2
## 116          I          B        4        5
## 117        III          C        6        4
## 118         II          C        4        0
## 119        III          A        3        4
## 120        III          0        9        2
## 121          I          B        1        8
## 122          I          0        5        0
## 123         II          0        9        9
## 124         II          B        3        8
## 125          0          B       10        5
## 126          0          A        1        9
## 127          I          0        4        0
## 128          I          C        3        2
## 129         II          C        0        4
## 130          I          A        1        8
## 131        III          A        8        6
## 132         II          C        9        0
## 133        III          A        2        0
## 134        III          B        3        9
## 135         II          C        6       10
## 136          0          B        8        6
## 137        III          0        5        4
## 138          I          B        2        1
## 139          I          A       10        3
## 140         II          C        9        7
## 141         II          B        1        3
## 142          I          C       10        5
## 143         II          A        4        8
## 144          0          C        1        0
## 145        III          C       10        8
## 146        III          A        0        0
## 147          0          B       10        7
## 148          0          C        0        0
## 149          0          C        1        3
## 150          0          A        0        5
## 151          I          A        3        5
## 152        III          B        8        4
## 153         II          C        7        7
## 154          I          0        5       10
## 155        III          C       10        2
## 156          I          B        8       10
## 157         II          C        8        4
## 158          0          A        7        2
## 159         II          A        7        5
## 160         II          0        6        1
## 161          0          0        0        7
## 162        III          C        6        7
## 163          I          C        2        7
## 164         II          0       10        1
## 165        III          C        0        5
## 166        III          C        0       10
## 167        III          0        1        0
## 168        III          B        2        5
## 169          0          C        0        0
## 170        III          C        9        6
## 171          I          C        9        8
## 172        III          A        6        5
## 173          I          C        6        0
## 174          0          A       10        8
## 175         II          0        7        1
## 176         II          A       10        4
## 177        III          A        0       10
## 178          I          A        6        5
## 179          I          A        8        7
## 180          I          C        6        4
## 181        III          A        3        6
## 182        III          B        4       10
## 183          I          A        4       10
## 184          I          0        1        0
## 185         II          A        0        8
## 186         II          0        0        9
## 187          0          C        7       10
## 188        III          B        8        2
## 189         II          C        9        9
## 190          I          A        4        9
## 191        III          A        7       10
## 192          0          A        1        8
## 193         II          A        5        7
## 194          I          0        6        3
## 195        III          A        9        0
## 196          I          0        0        4
## 197          I          C        5       10
## 198        III          0        6        3
## 199        III          C        7       10
## 200          I          B        6        2
## 201          I          A        1        4
## 202          I          B        0        4
## 203          I          0        0        0
## 204          I          B        5        7
## 205          I          C        0        2
## 206          I          0        7        3
## 207         II          B        2        7
## 208          0          A        7        4
## 209         II          A        6        4
## 210          0          0       10        8
## 211          I          A        8        1
## 212          I          C        7        3
## 213         II          C       10        7
## 214         II          0        7       10
## 215         II          C        1        3
## 216          0          C        0        6
## 217          0          C        1        0
## 218          I          C        1        1
## 219         II          A        5        9
## 220         II          B        2        6
## 221         II          C       10       10
## 222         II          A        0        7
## 223          I          0        6        1
## 224          I          B        3        9
## 225        III          C        5        7
## 226          I          A        4       10
## 227         II          B        7        9
## 228          0          A        0        0
## 229          I          B        5        3
## 230        III          0        2        3
## 231          I          B        0        8
## 232        III          C        3        5
## 233          I          B        3        4
## 234          0          C        2        7
## 235         II          B        9        1
## 236         II          A        6        2
## 237        III          C        9        2
## 238          I          A        7        0
## 239        III          B        9        7
## 240          I          A        7        0
## 241          I          B        1        4
## 242          I          B        7        9
## 243        III          C        0        3
## 244          I          C        7        6
## 245        III          C        9        8
## 246         II          0        4        4
## 247          I          B        8        4
## 248        III          A        1        9
## 249        III          C       10        9
## 250         II          C        3        0
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 750 rows ]</code></pre>
</div>
<div id="python-1" class="section level3" number="0.2.2">
<h3 number="0.2.2"><span class="header-section-number">0.2.2</span> Python</h3>
<pre class="python"><code># count missing by columns
df.isnull().sum()


# fill all missing by 0
df.fillna(0)

# fill missing by columns
df.fillna(value = {&quot;dimension1&quot;: &quot;Unknown&quot;, &quot;measure1&quot;: 0})</code></pre>
</div>
</div>
<div id="unique-row" class="section level2" number="0.3">
<h2 number="0.3"><span class="header-section-number">0.3</span> Unique row</h2>
<div id="r-2" class="section level3" number="0.3.1">
<h3 number="0.3.1"><span class="header-section-number">0.3.1</span> R</h3>
<pre class="r"><code># unique row
df %&gt;% distinct()</code></pre>
<pre><code>##     dimension1 dimension2 measure1 measure2
## 1            I          0        7        7
## 2          III          B        3        8
## 3            I          A        4       10
## 4           II          0        7        3
## 5            I          A        9        1
## 6          III          A       10        0
## 7          III          A        8        8
## 8            0          C        2        7
## 9           II          C        2        9
## 10         III          C        7        1
## 11         III          0        5        4
## 12           I          A        9        6
## 13           I          C        0       10
## 14           I          A        2        4
## 15          II          A        1        9
## 16           0          C        7        1
## 17          II          C        8        0
## 18          II          B        0        2
## 19         III          0        5        5
## 20           0          A        8       10
## 21         III          0       10        8
## 22           I          B        9        2
## 23           I          C        0        8
## 24           I          0        7       10
## 25           I          B        5        2
## 26          II          B        8        9
## 27           I          B        4        9
## 28           I          C        4        5
## 29          II          B        0        0
## 30           0          A        3        9
## 31          II          0       10        1
## 32           I          A        0        0
## 33         III          A        5        9
## 34           I          C        9        6
## 35         III          0        2        5
## 36          II          C        5        8
## 37          II          0        0        2
## 38           0          C        7       10
## 39          II          B        3        5
## 40         III          A        5        8
## 41          II          B        4        8
## 42           I          0        2        0
## 43         III          C        0        9
## 44          II          B        2        7
## 45           I          A        7       10
## 46           I          C        3        9
## 47           0          C        8        7
## 48          II          B        6        4
## 49          II          B       10       10
## 50           0          A        2        4
## 51         III          A        6        8
## 52          II          C        7        0
## 53          II          0        3        1
## 54          II          C        3        2
## 55          II          B       10        4
## 56           0          C        1       10
## 57          II          A        2        2
## 58          II          C        1        1
## 59          II          A        1        5
## 60          II          C        0        8
## 61           I          A        8        4
## 62         III          B        0        1
## 63           0          B        9        4
## 64          II          C        9        0
## 65         III          A        6        7
## 66         III          A        1        8
## 67          II          0        7        1
## 68         III          B        3        2
## 69         III          A        7        7
## 70           I          B        4        6
## 71           I          C        5        4
## 72           0          B        2        1
## 73           I          C        7        8
## 74         III          B        6        1
## 75          II          B        7        3
## 76         III          0        9       10
## 77           I          B        9        4
## 78           0          C        7        0
## 79          II          A       10        9
## 80           I          A        6        2
## 81           I          C        9        5
## 82           I          A        6        8
## 83           I          B        2        7
## 84           0          C        7        6
## 85          II          C        6        5
## 86           I          C        2       10
## 87           I          C       10        0
## 88         III          A        4        0
## 89           0          0        6        0
## 90         III          A        5        7
## 91          II          C        3        0
## 92           0          B        2        4
## 93          II          A        4        5
## 94         III          A        2        5
## 95          II          0        0        4
## 96           0          A       10       10
## 97         III          0        9        5
## 98         III          0        5        1
## 99           I          B        9        7
## 100          0          B        1       10
## 101         II          A        3        2
## 102          0          A        9        2
## 103        III          B        4        4
## 104          0          A        1        0
## 105         II          B        5        4
## 106        III          B        9        9
## 107         II          C        2        8
## 108          I          0        4        2
## 109          0          0        9        4
## 110        III          0        1        8
## 111          I          0        5        0
## 112         II          0        4        2
## 113          I          B        4        5
## 114        III          C        6        4
## 115         II          C        4        0
## 116        III          A        3        4
## 117        III          0        9        2
## 118          I          B        1        8
## 119         II          0        9        9
## 120         II          B        3        8
## 121          0          B       10        5
## 122          0          A        1        9
## 123          I          0        4        0
## 124          I          C        3        2
## 125         II          C        0        4
## 126          I          A        1        8
## 127        III          A        8        6
## 128        III          A        2        0
## 129        III          B        3        9
## 130         II          C        6       10
## 131          0          B        8        6
## 132          I          B        2        1
## 133          I          A       10        3
## 134         II          C        9        7
## 135         II          B        1        3
## 136          I          C       10        5
## 137         II          A        4        8
## 138          0          C        1        0
## 139        III          C       10        8
## 140        III          A        0        0
## 141          0          B       10        7
## 142          0          C        0        0
## 143          0          C        1        3
## 144          0          A        0        5
## 145          I          A        3        5
## 146        III          B        8        4
## 147         II          C        7        7
## 148          I          0        5       10
## 149        III          C       10        2
## 150          I          B        8       10
## 151         II          C        8        4
## 152          0          A        7        2
## 153         II          A        7        5
## 154         II          0        6        1
## 155          0          0        0        7
## 156        III          C        6        7
## 157          I          C        2        7
## 158        III          C        0        5
## 159        III          C        0       10
## 160        III          0        1        0
## 161        III          B        2        5
## 162        III          C        9        6
## 163          I          C        9        8
## 164        III          A        6        5
## 165          I          C        6        0
## 166          0          A       10        8
## 167         II          A       10        4
## 168        III          A        0       10
## 169          I          A        6        5
## 170          I          A        8        7
## 171          I          C        6        4
## 172        III          A        3        6
## 173        III          B        4       10
## 174          I          0        1        0
## 175         II          A        0        8
## 176         II          0        0        9
## 177        III          B        8        2
## 178         II          C        9        9
## 179          I          A        4        9
## 180        III          A        7       10
## 181          0          A        1        8
## 182         II          A        5        7
## 183          I          0        6        3
## 184        III          A        9        0
## 185          I          0        0        4
## 186          I          C        5       10
## 187        III          0        6        3
## 188        III          C        7       10
## 189          I          B        6        2
## 190          I          A        1        4
## 191          I          B        0        4
## 192          I          0        0        0
## 193          I          B        5        7
## 194          I          C        0        2
## 195          I          0        7        3
## 196          0          A        7        4
## 197         II          A        6        4
## 198          0          0       10        8
## 199          I          A        8        1
## 200          I          C        7        3
## 201         II          C       10        7
## 202         II          0        7       10
## 203         II          C        1        3
## 204          0          C        0        6
## 205          I          C        1        1
## 206         II          A        5        9
## 207         II          B        2        6
## 208         II          C       10       10
## 209         II          A        0        7
## 210          I          0        6        1
## 211          I          B        3        9
## 212        III          C        5        7
## 213         II          B        7        9
## 214          0          A        0        0
## 215          I          B        5        3
## 216        III          0        2        3
## 217          I          B        0        8
## 218        III          C        3        5
## 219          I          B        3        4
## 220         II          B        9        1
## 221         II          A        6        2
## 222        III          C        9        2
## 223          I          A        7        0
## 224        III          B        9        7
## 225          I          B        1        4
## 226          I          B        7        9
## 227        III          C        0        3
## 228          I          C        7        6
## 229        III          C        9        8
## 230         II          0        4        4
## 231          I          B        8        4
## 232        III          A        1        9
## 233        III          C       10        9
## 234          I          B        0       10
## 235        III          A        5        6
## 236         II          B        8       10
## 237          I          B        3       10
## 238          0          A        1        4
## 239          0          A        4        6
## 240          I          0        6        9
## 241         II          B       10        5
## 242          0          C        4        0
## 243         II          C        6        8
## 244          I          A        5        7
## 245          0          C        5        5
## 246          I          B        2        0
## 247          I          A        0        8
## 248         II          C        7        9
## 249          0          C        0        9
## 250          0          C        8        4
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 516 rows ]</code></pre>
<pre class="r"><code># unique row by columns
df %&gt;% distinct(dimension1, dimension2, .keep_all = T)</code></pre>
<pre><code>##    dimension1 dimension2 measure1 measure2
## 1           I          0        7        7
## 2         III          B        3        8
## 3           I          A        4       10
## 4          II          0        7        3
## 5         III          A       10        0
## 6           0          C        2        7
## 7          II          C        2        9
## 8         III          C        7        1
## 9         III          0        5        4
## 10          I          C        0       10
## 11         II          A        1        9
## 12         II          B        0        2
## 13          0          A        8       10
## 14          I          B        9        2
## 15          0          B        9        4
## 16          0          0        6        0</code></pre>
</div>
<div id="python-2" class="section level3" number="0.3.2">
<h3 number="0.3.2"><span class="header-section-number">0.3.2</span> Python</h3>
<pre class="python"><code># unique row
df.drop_duplicates()

# unique row by columns
df.drop_duplicates(subset=(&#39;dimension1&#39;, &#39;dimension2&#39;))</code></pre>
</div>
</div>
<div id="level-count" class="section level2" number="0.4">
<h2 number="0.4"><span class="header-section-number">0.4</span> Level Count</h2>
<div id="r-3" class="section level3" number="0.4.1">
<h3 number="0.4.1"><span class="header-section-number">0.4.1</span> R</h3>
<pre class="r"><code># distribution
table(df$dimension1)</code></pre>
<pre><code>## 
##   0   I  II III 
## 163 295 275 267</code></pre>
<pre class="r"><code># contingency table
table(df$dimension1, df$dimension2)</code></pre>
<pre><code>##      
##        0  A  B  C
##   0   31 41 40 51
##   I   47 89 80 79
##   II  45 71 89 70
##   III 40 75 66 86</code></pre>
</div>
<div id="python-3" class="section level3" number="0.4.2">
<h3 number="0.4.2"><span class="header-section-number">0.4.2</span> Python</h3>
<pre class="python"><code># distribution
df.dimension1.value_counts()

# contingency table
pd.crosstab(df.dimension1, df.dimension2)</code></pre>
</div>
</div>
<div id="summary" class="section level2" number="0.5">
<h2 number="0.5"><span class="header-section-number">0.5</span> Summary</h2>
<div id="r-4" class="section level3" number="0.5.1">
<h3 number="0.5.1"><span class="header-section-number">0.5.1</span> R</h3>
<pre class="r"><code># summarize the total, percent, ratio, and ratio

df %&gt;% 
  group_by(dimension1) %&gt;% 
  summarise(
    measure1 = sum(measure1, na.rm = T),
    measure2 = sum(measure2, na.rm = T),
    count = n()
  ) %&gt;% 
  mutate(
    measure1_percent = measure1/sum(measure1),
    ratio = measure1/measure2
  ) %&gt;% 
  mutate(
    ratio_relativity = ratio/(sum(measure1)/sum(measure2))
  )</code></pre>
<pre><code>## # A tibble: 4 x 7
##   dimension1 measure1 measure2 count measure1_percent ratio ratio_relativity
## * &lt;chr&gt;         &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;            &lt;dbl&gt; &lt;dbl&gt;            &lt;dbl&gt;
## 1 0               749      752   163            0.157 0.996            1.00 
## 2 I              1480     1460   295            0.311 1.01             1.02 
## 3 II             1288     1261   275            0.271 1.02             1.03 
## 4 III            1244     1320   267            0.261 0.942            0.949</code></pre>
</div>
<div id="python-4" class="section level3" number="0.5.2">
<h3 number="0.5.2"><span class="header-section-number">0.5.2</span> Python</h3>
<pre class="python"><code># summarize the total, percent, ratio, and relativity
def oneway(g):
  return(
    pd.Series({
      &quot;measure1&quot;: g.measure1.sum(),
      &quot;measure2&quot;: g.measure2.sum(),
      &quot;count&quot;: len(g),
      &quot;measure1_percent&quot;: g.measure1.sum()/df.measure1.sum(),
      &quot;ratio&quot;: g.measure1.sum()/g.measure2.sum(),
      &quot;ratio_relativity&quot;:
        (g.measure1.sum()/g.measure2.sum())/ 
        (df.measure1.sum()/df.measure2.sum())
    })
  )
  
df.groupby(&quot;dimension1&quot;).apply(oneway)</code></pre>
</div>
</div>
<div id="merge" class="section level2" number="0.6">
<h2 number="0.6"><span class="header-section-number">0.6</span> Merge</h2>
<div id="r-5" class="section level3" number="0.6.1">
<h3 number="0.6.1"><span class="header-section-number">0.6.1</span> R</h3>
<pre class="r"><code># join tables with different key names
df2 &lt;- df %&gt;%
  group_by(dimension1, dimension2) %&gt;%
  summarise(
    measure3 = sum(measure1, na.rm = T),
    measure4 = sum(measure2, na.rm = T)
  ) %&gt;%
  rename(dimension3 = dimension1, dimension4 = dimension2)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;dimension1&#39;. You can override using the `.groups` argument.</code></pre>
<pre class="r"><code>left_join(df, df2,
  by = c(
    &quot;dimension1&quot; = &quot;dimension3&quot;,
    &quot;dimension2&quot; = &quot;dimension4&quot;
  )
)</code></pre>
<pre><code>##     dimension1 dimension2 measure1 measure2 measure3 measure4
## 1            I          0        7        7      229      195
## 2          III          B        3        8      314      337
## 3            I          A        4       10      461      480
## 4           II          0        7        3      226      180
## 5            I          A        9        1      461      480
## 6          III          A       10        0      353      356
## 7          III          A        8        8      353      356
## 8            0          C        2        7      206      226
## 9           II          C        2        9      340      333
## 10         III          C        7        1      386      442
## 11         III          0        5        4      191      185
## 12           I          A        9        6      461      480
## 13           I          C        0       10      398      359
## 14           I          A        2        4      461      480
## 15          II          A        1        9      282      358
## 16           0          C        7        1      206      226
## 17          II          C        8        0      340      333
## 18          II          B        0        2      440      390
## 19         III          0        5        5      191      185
## 20           0          A        8       10      178      206
## 21         III          0       10        8      191      185
## 22           I          B        9        2      392      426
## 23           I          C        0        8      398      359
## 24           I          0        7       10      229      195
## 25           I          B        5        2      392      426
## 26          II          B        8        9      440      390
## 27           I          B        4        9      392      426
## 28           I          C        4        5      398      359
## 29          II          B        0        0      440      390
## 30           0          A        3        9      178      206
## 31          II          0       10        1      226      180
## 32           I          A        0        0      461      480
## 33         III          A        5        9      353      356
## 34           I          C        9        6      398      359
## 35         III          0        2        5      191      185
## 36          II          C        5        8      340      333
## 37          II          0        0        2      226      180
## 38           0          C        7       10      206      226
## 39          II          B        3        5      440      390
## 40         III          A        5        8      353      356
## 41          II          B        4        8      440      390
## 42           I          0        2        0      229      195
## 43         III          C        0        9      386      442
## 44          II          B        2        7      440      390
## 45           I          A        7       10      461      480
## 46           I          C        3        9      398      359
## 47           0          C        8        7      206      226
## 48          II          B        6        4      440      390
## 49          II          B       10       10      440      390
## 50           0          A        2        4      178      206
## 51         III          A        6        8      353      356
## 52          II          C        7        0      340      333
## 53          II          0        3        1      226      180
## 54          II          C        3        2      340      333
## 55          II          B       10        4      440      390
## 56           0          C        1       10      206      226
## 57          II          A        2        2      282      358
## 58          II          C        1        1      340      333
## 59          II          A        1        5      282      358
## 60          II          C        0        8      340      333
## 61           I          A        8        4      461      480
## 62         III          B        0        1      314      337
## 63           0          B        9        4      209      206
## 64          II          C        9        0      340      333
## 65         III          A        6        7      353      356
## 66         III          A        1        8      353      356
## 67          II          0        7        1      226      180
## 68         III          B        3        2      314      337
## 69         III          A        7        7      353      356
## 70           I          B        4        6      392      426
## 71           I          C        5        4      398      359
## 72           0          B        2        1      209      206
## 73           I          C        7        8      398      359
## 74         III          B        6        1      314      337
## 75          II          B        7        3      440      390
## 76         III          0        9       10      191      185
## 77           I          B        9        4      392      426
## 78           0          C        7        0      206      226
## 79          II          A       10        9      282      358
## 80           I          A        6        2      461      480
## 81           I          C        9        5      398      359
## 82           I          A        6        8      461      480
## 83           I          B        2        7      392      426
## 84           0          C        7        6      206      226
## 85          II          C        6        5      340      333
## 86           I          C        2       10      398      359
## 87           I          C       10        0      398      359
## 88         III          A        4        0      353      356
## 89           0          0        6        0      156      114
## 90         III          A        5        7      353      356
## 91          II          C        3        0      340      333
## 92           0          B        2        4      209      206
## 93          II          A        4        5      282      358
## 94         III          A        2        5      353      356
## 95          II          0        0        4      226      180
## 96           0          A       10       10      178      206
## 97         III          0        9        5      191      185
## 98         III          0        5        1      191      185
## 99         III          A        7        7      353      356
## 100          I          B        9        7      392      426
## 101          0          B        1       10      209      206
## 102         II          A        3        2      282      358
## 103          0          A        9        2      178      206
## 104        III          B        4        4      314      337
## 105          0          A        1        0      178      206
## 106         II          B        5        4      440      390
## 107        III          B        9        9      314      337
## 108         II          C        2        8      340      333
## 109          I          0        7        7      229      195
## 110         II          A        3        2      282      358
## 111          I          0        4        2      229      195
## 112          0          0        9        4      156      114
## 113        III          0        1        8      191      185
## 114          I          0        5        0      229      195
## 115         II          0        4        2      226      180
## 116          I          B        4        5      392      426
## 117        III          C        6        4      386      442
## 118         II          C        4        0      340      333
## 119        III          A        3        4      353      356
## 120        III          0        9        2      191      185
## 121          I          B        1        8      392      426
## 122          I          0        5        0      229      195
## 123         II          0        9        9      226      180
## 124         II          B        3        8      440      390
## 125          0          B       10        5      209      206
## 126          0          A        1        9      178      206
## 127          I          0        4        0      229      195
## 128          I          C        3        2      398      359
## 129         II          C        0        4      340      333
## 130          I          A        1        8      461      480
## 131        III          A        8        6      353      356
## 132         II          C        9        0      340      333
## 133        III          A        2        0      353      356
## 134        III          B        3        9      314      337
## 135         II          C        6       10      340      333
## 136          0          B        8        6      209      206
## 137        III          0        5        4      191      185
## 138          I          B        2        1      392      426
## 139          I          A       10        3      461      480
## 140         II          C        9        7      340      333
## 141         II          B        1        3      440      390
## 142          I          C       10        5      398      359
## 143         II          A        4        8      282      358
## 144          0          C        1        0      206      226
## 145        III          C       10        8      386      442
## 146        III          A        0        0      353      356
## 147          0          B       10        7      209      206
## 148          0          C        0        0      206      226
## 149          0          C        1        3      206      226
## 150          0          A        0        5      178      206
## 151          I          A        3        5      461      480
## 152        III          B        8        4      314      337
## 153         II          C        7        7      340      333
## 154          I          0        5       10      229      195
## 155        III          C       10        2      386      442
## 156          I          B        8       10      392      426
## 157         II          C        8        4      340      333
## 158          0          A        7        2      178      206
## 159         II          A        7        5      282      358
## 160         II          0        6        1      226      180
## 161          0          0        0        7      156      114
## 162        III          C        6        7      386      442
## 163          I          C        2        7      398      359
## 164         II          0       10        1      226      180
## 165        III          C        0        5      386      442
## 166        III          C        0       10      386      442
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 834 rows ]</code></pre>
</div>
<div id="python-5" class="section level3" number="0.6.2">
<h3 number="0.6.2"><span class="header-section-number">0.6.2</span> Python</h3>
<pre class="python"><code># join tables with different key names
# pd.merge(df, df2,
#   how=&quot;left&quot;, 
#   left_on=[&quot;dimesnion1&quot;, &quot;dimesnion2&quot;],
#   right_on=[&quot;dimesnion3&quot;, &quot;dimesnion4&quot;]
# )</code></pre>
</div>
</div>
<div id="reshape" class="section level2" number="0.7">
<h2 number="0.7"><span class="header-section-number">0.7</span> Reshape</h2>
<div id="r-6" class="section level3" number="0.7.1">
<h3 number="0.7.1"><span class="header-section-number">0.7.1</span> R</h3>
<pre class="r"><code># wide to long
df_reshape &lt;- df %&gt;% gather(c(&quot;measure1&quot;, &quot;measure2&quot;), 
                            key = &quot;measure&quot;, value = &quot;values&quot;)

# long to wide: the value must be unqiue by other variales
df_reshape %&gt;%
  group_by(dimension1, dimension2, measure) %&gt;%
  summarise(values = sum(values, na.rm = T)) %&gt;% 
  spread(key = measure, value = values)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;dimension1&#39;, &#39;dimension2&#39;. You can override using the `.groups` argument.</code></pre>
<pre><code>## # A tibble: 16 x 4
## # Groups:   dimension1, dimension2 [16]
##    dimension1 dimension2 measure1 measure2
##    &lt;chr&gt;      &lt;chr&gt;         &lt;dbl&gt;    &lt;dbl&gt;
##  1 0          0               156      114
##  2 0          A               178      206
##  3 0          B               209      206
##  4 0          C               206      226
##  5 I          0               229      195
##  6 I          A               461      480
##  7 I          B               392      426
##  8 I          C               398      359
##  9 II         0               226      180
## 10 II         A               282      358
## 11 II         B               440      390
## 12 II         C               340      333
## 13 III        0               191      185
## 14 III        A               353      356
## 15 III        B               314      337
## 16 III        C               386      442</code></pre>
</div>
<div id="python-6" class="section level3" number="0.7.2">
<h3 number="0.7.2"><span class="header-section-number">0.7.2</span> Python</h3>
<pre class="python"><code>df_reshape = pd.melt(df,
  id_vars=[&#39;dimension1&#39;, &#39;dimension2&#39;],
  value_vars=[&#39;measure1&#39;, &#39;measure2&#39;])

(df_reshape.groupby([&#39;dimension1&#39;, &#39;dimension2&#39;, &#39;variable&#39;],
                    as_index=False)
           .value.sum()
           .pivot_table(index=[&#39;dimension1&#39;, &#39;dimension2&#39;],
                        columns=&#39;variable&#39;, values=&#39;value&#39;))</code></pre>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
